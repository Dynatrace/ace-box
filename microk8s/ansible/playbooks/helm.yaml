
- name: Create directory for helm
  file:
    path: "/home/{{ non_root_user }}/.kube"
    state: directory

- name: Config for helm
  shell: "/snap/bin/microk8s.kubectl config view --raw > /home/{{ non_root_user }}/.kube/config"

- name: Install Helm with snap
  become: true
  shell: "snap install helm --classic"

- name: Helm - enable Jenkins repo
  become_user: "{{ non_root_user }}"
  command: /snap/bin/helm repo add jenkins https://charts.jenkins.io
  
- name: Helm - enable Incubator Repo
  become_user: "{{ non_root_user }}"
  shell: /snap/bin/helm repo add incubator https://charts.helm.sh/incubator