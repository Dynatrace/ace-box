---
- name: Validate required extra_vars
  include_role:
    name: config-v2
    tasks_from: validate-extra-vars
  vars:
    required_extra_vars:
      - { key: 'dt_oauth_sso_endpoint' }
      - { key: 'dt_oauth_client_id', regex: 'dt0s02\..' }
      - { key: 'dt_oauth_client_secret', regex: 'dt0s02\..' }
      - { key: 'dt_oauth_account_urn', regex: 'urn:dtaccount:.' }
      - { key: 'dt_environment_url_gen3' }

- include_role:
    name: microk8s

- include_role:
    name: gitea

# TBD: Add custom monaco

- ansible.builtin.include_tasks: simplenode.yml

- ansible.builtin.include_tasks: jenkins.yml

- include_role:
    name: dashboard
