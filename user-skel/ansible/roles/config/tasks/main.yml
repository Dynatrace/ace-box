---
- name: Config - Enable default features
  include_role:
    name: config
    tasks_from: update
    apply:
      tags:
      - default
  vars:
    ace_config_key: "{{ item }}"
    ace_config_value: true
  loop: "{{ features_enabled_default }}"
  tags:
  - never
  - default

- name: Config - Enable Gitlab
  include_role:
    name: config
    tasks_from: update
    apply:
      tags:
      - gitlab
  vars:
    ace_config_key: "feature_gitlab"
    ace_config_value: true
  tags:
  - never
  - gitlab

- name: Config - Enable AWX
  include_role:
    name: config
    tasks_from: update
    apply:
      tags:
      - awx
  vars:
    ace_config_key: "feature_awx"
    ace_config_value: true
  tags:
  - never
  - awx

- name: Config - Enable VScode
  include_role:
    name: config
    tasks_from: update
    apply:
      tags:
      - vscodeserver
  vars:
    ace_config_key: "feature_vscodeserver"
    ace_config_value: true
  tags:
  - never
  - vscodeserver
  
- include: roles/config/tasks/source.yml
  tags:
  - always
