---
- name: Source endpoints
  kubernetes.core.k8s_info:
    kind: Ingress
    name: "keptn-ingress"
    namespace: "{{ keptn_namespace }}"
  register: keptn_ingress_data

- name: Set facts
  set_fact:
    keptn_ingress_domain: "{{ keptn_ingress_data.resources[0].spec.rules[0].host }}"
    keptn_endpoint: "{{ ingress_protocol }}://{{ keptn_ingress_data.resources[0].spec.rules[0].host }}/api"
    keptn_bridge: "{{ ingress_protocol }}://{{ keptn_ingress_data.resources[0].spec.rules[0].host }}/bridge"
